{"version":3,"sources":["metal/notifier.coffee"],"names":[],"mappings":"AACA;AAAA,MAAA;;EAAA,GAAA,GAAM,OAAA,CAAQ,KAAR;;EACN,YAAA,GAAe,OAAA,CAAQ,0BAAR;;EACf,aAAA,GAAgB,OAAA,CAAQ,4BAAR;;EAEhB,OAAA,GAAU,SAAA;WACR,aAAa,CAAC,QAAd,CAAuB,SAAC,MAAD;AAErB,UAAA;AAAA,cAAO,MAAM,CAAC,WAAd;AAAA,aAEO,YAAY,CAAC,YAFpB;UAGM,QAAU,OAAV;UACF,OAAA,GAAU,KAAA,GAAQ;;eACH,CAAE,cAAjB,CAAgC,KAAhC;;iDACQ,CAAE,QAAV,CAAqB,CAAC,OAAO,CAAC,OAAR,CAAA,CAAD,CAAA,GAAmB,GAAxC;AANJ,aAQO,YAAY,CAAC,cARpB;;gBASmB,CAAE,cAAjB,CAAgC,CAAC,CAAjC;;iDACQ,CAAE,QAAV,CAAmB,EAAnB;AAVJ,aAYO,YAAY,CAAC,MAZpB;iDAaY,CAAE,MAAV,CAAA;AAbJ,aAeO,YAAY,CAAC,MAfpB;UAgBM,UAAY,OAAZ;AACF,kBAAO,OAAO,CAAC,QAAf;AAAA,iBACO,OADP;0DAEiB,CAAE,cAAf,CAA8B;gBAC5B,KAAA,EAAO,SADqB;gBAE5B,OAAA,EAAS,OAFmB;eAA9B;AAFJ;cAOI,IAAA,GAAO,mBAAA,GAAmB,CAAC,IAAI,CAAC,SAAL,CAAe,OAAf,CAAD,CAAnB,GAA4C;gGACvB,CAAE,iBAA9B,CAAgD,IAAhD;AARJ;AAjBJ;IAFqB,CAAvB;EADQ;;EA8BV,MAAM,CAAC,OAAP,GAAiB;IAAE,SAAA,OAAF;;AAlCjB","file":"metal/notifier.js","sourceRoot":"/source/","sourcesContent":["\napp = require \"app\"\nAppConstants = require \"./constants/AppConstants\"\nAppDispatcher = require \"./dispatcher/AppDispatcher\"\n\ninstall = ->\n  AppDispatcher.register (action) ->\n\n    switch action.action_type\n\n      when AppConstants.SET_PROGRESS\n        { alpha } = action\n        percent = alpha * 100\n        app.main_window?.setProgressBar(alpha)\n        app.dock?.setBadge \"#{percent.toFixed()}%\"\n\n      when AppConstants.CLEAR_PROGRESS\n        app.main_window?.setProgressBar(-1)\n        app.dock?.setBadge \"\"\n\n      when AppConstants.BOUNCE\n        app.dock?.bounce()\n\n      when AppConstants.NOTIFY\n        { message } = action\n        switch process.platform\n          when \"win32\"\n            app.main_tray?.displayBalloon {\n              title: \"itch.io\"\n              content: message\n            }\n          else\n            code = \"new Notification(#{JSON.stringify(message)})\"\n            app.main_window?.webContents?.executeJavaScript(code)\n\nmodule.exports = { install }\n\n"]}