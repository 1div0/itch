{"version":3,"sources":["metal/extractor.coffee"],"names":[],"mappings":"AACA;AAAA,MAAA;;EAAA,UAAA,GAAa,OAAA,CAAQ,YAAR;;EACb,SAAA,GAAY,OAAA,CAAQ,WAAR;;EAEZ,OAAA,GAAU,OAAA,CAAQ,UAAR;;EAEV,OAAA,GAAU,SAAC,YAAD,EAAe,SAAf;AACR,QAAA;IAAA,MAAA,GAAS,UAAU,CAAC,IAAX,CAAgB,YAAhB,EAA8B,CAA9B,EAAiC,GAAjC;IACT,IAAA,GAAO,SAAA,CAAU,MAAV;IAEP,OAAO,CAAC,GAAR,CAAY,WAAA,GAAY,YAAZ,GAAyB,IAAzB,GAA4B,CAAC,IAAI,CAAC,SAAL,CAAe,IAAf,CAAD,CAAxC;AAEA,YAAO,IAAI,CAAC,GAAZ;AAAA,WACO,KADP;AAAA,WACc,IADd;AAAA,WACoB,KADpB;AAAA,WAC2B,IAD3B;eAEI,OAAA,CAAQ,mBAAR,CAA4B,CAAC,OAA7B,CAAqC,YAArC,EAAmD,SAAnD;AAFJ;QAII,CAAA,GAAI,OAAO,CAAC,MAAR,CAAe,4BAAA,GAA6B,YAA7B,GAA0C,KAA1C,GAA8C,CAAC,IAAI,CAAC,SAAL,CAAe,IAAf,CAAD,CAA7D;QACJ,CAAC,CAAC,QAAF,GAAa,CAAC,SAAA;iBAAG;QAAH,CAAD;eACb;AANJ;EANQ;;EAcV,MAAM,CAAC,OAAP,GAAiB;IAAE,SAAA,OAAF;;AAnBjB","file":"metal/extractor.js","sourceRoot":"/source/","sourcesContent":["\nread_chunk = require \"read-chunk\"\nfile_type = require \"file-type\"\n\nPromise = require \"bluebird\"\n\nextract = (archive_path, dest_path) ->\n  buffer = read_chunk.sync(archive_path, 0, 262)\n  type = file_type(buffer)\n\n  console.log \"type for #{archive_path}: #{JSON.stringify type}\"\n\n  switch type.ext\n    when 'zip', 'gz', 'bz2', '7z'\n      require(\"./extractors/7zip\").extract archive_path, dest_path\n    else\n      p = Promise.reject \"Don't know how to extract #{archive_path} / #{JSON.stringify type}\"\n      p.progress = (-> p)\n      p\n\nmodule.exports = { extract }\n\n"]}